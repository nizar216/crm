<div class="reclamation-create-container">
  <div class="modern-card">
    <div class="header-section">
      <div class="header-content">
        <h2 class="section-title">Nouvelle Réclamation</h2>
      </div>
    </div>
    <form [formGroup]="reclamationForm" (ngSubmit)="onSubmit()">
      <div *ngIf="errorMessage" class="modern-empty alert modern-alert mb-3">
        {{ errorMessage }}
      </div>
      <div class="card-body">
        <!-- Informations Client Section -->
        <div class="modern-section personal-section">
          <h4 class="section-title">Informations Client</h4>
          <div class="row">
            <div class="col-md-4 mb-3">
              <label class="form-label">Client <span class="text-danger">*</span></label>
              <nz-select
                formControlName="IdClient"
                nzPlaceHolder="Sélectionner un client"
                [nzOptions]="clients"
                class="modern-input"
                nzBorderless
              ></nz-select>
              <div *ngIf="reclamationForm.get('IdClient')?.invalid && reclamationForm.get('IdClient')?.touched" class="text-danger small">
                Veuillez sélectionner un client
              </div>
            </div>
            <div class="col-md-4 mb-3">
              <label class="form-label">Personne à contacter</label>
              <input nz-input type="text" class="form-control modern-input" formControlName="personneAcontacter" [readonly]="true">
            </div>
            <div class="col-md-4 mb-3">
              <label class="form-label">Téléphone</label>
              <input nz-input type="text" class="form-control modern-input" formControlName="telephone1" [readonly]="true">
            </div>
          </div>
        </div>
        <!-- Informations Article Section -->
        <div class="modern-section contact-section">
          <h4 class="section-title">Informations Article</h4>
          <div class="row">
            <div class="col-md-3 mb-3">
              <label class="form-label">Article</label>
              <nz-select
                formControlName="idArticle"
                nzPlaceHolder="Sélectionner un article"
                [nzOptions]="articles"
                class="modern-input"
                nzBorderless
              ></nz-select>
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Numéro de série</label>
              <input nz-input type="text" class="form-control modern-input" formControlName="serial_number">
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Revendeur</label>
              <nz-select
                formControlName="IdRevendeur"
                nzPlaceHolder="Sélectionner un revendeur"
                [nzOptions]="revendeurs"
                class="modern-input"
                nzBorderless
              ></nz-select>
            </div>
          </div>
        </div>
        <!-- Informations Intervention Section -->
        <div class="modern-section address-section">
          <h4 class="section-title">Informations Intervention</h4>
          <div class="row">
            <div class="col-md-3 mb-3">
              <label class="form-label">Type Intervention</label>
              <input nz-input type="text" class="form-control modern-input" formControlName="typeIntervention">
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Type Régulation</label>
              <input nz-input type="text" class="form-control modern-input" formControlName="typeregulation">
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Technicien</label>
              <nz-select
                formControlName="IdTechnicien"
                nzPlaceHolder="Sélectionner un technicien"
                [nzOptions]="techniciens"
                class="modern-input"
                nzBorderless
              ></nz-select>
            </div>
          </div>
        </div>
        <!-- Planning Section -->
        <div class="modern-section planning-section">
          <h4 class="section-title">Planning</h4>
          <div class="row">
            <div class="col-md-3 mb-3">
              <label class="form-label">Date Saisie <span class="text-danger">*</span></label>
              <nz-date-picker
                formControlName="dateSaisie"
                [nzFormat]="'dd/MM/yyyy'"
                class="modern-input"
              ></nz-date-picker>
              <div *ngIf="reclamationForm.get('dateSaisie')?.invalid && reclamationForm.get('dateSaisie')?.touched" class="text-danger small">
                Veuillez sélectionner une date
              </div>
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Date RDV</label>
              <nz-date-picker
                formControlName="dateDeRandezVous"
                [nzFormat]="'dd/MM/yyyy'"
                class="modern-input"
              ></nz-date-picker>
            </div>
            <div class="col-md-3 mb-3">
              <label class="form-label">Heure Début</label>
              <nz-time-picker
                formControlName="heureDebut"
                [nzFormat]="'HH:mm'"
                class="modern-input"
              ></nz-time-picker>
            </div>
          </div>
        </div>
        <!-- Notes Section -->
        <div class="modern-section notes-section">
          <h4 class="section-title">Notes</h4>
          <div class="row">
            <div class="col-md-6 mb-3">
              <label class="form-label">Note SAV</label>
              <textarea nz-input class="form-control modern-input" formControlName="note_Sav" rows="3" placeholder="Entrez les notes SAV ici..."></textarea>
            </div>
            <div class="col-md-6 mb-3">
              <label class="form-label">Note Technicien</label>
              <textarea nz-input class="form-control modern-input" formControlName="note_technicien" rows="3" placeholder="Entrez les notes technicien ici..."></textarea>
            </div>
          </div>
        </div>
      </div>
      <div class="card-footer text-end">
        <button type="button" class="glass-btn btn me-2" (click)="onCancel()">
          <i ant-icon type="close"></i> Annuler
        </button>
        <button type="submit" class="modern-primary-btn btn" [disabled]="isLoading">
          <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
          <i *ngIf="!isLoading" ant-icon type="save"></i> Créer
        </button>
      </div>
    </form>
  </div>
</div>
